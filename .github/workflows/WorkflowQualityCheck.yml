name: CI - Quality Check

on:
push:
branches:
- main
pull_request:
branches:
- main

jobs:
quality-check-frontend:
runs-on: ubuntu-latest
steps:
- name: Checkout code
uses: actions/checkout@v4

- name: Set up Node.js
uses: actions/setup-node@v3
with:
node-version: '18'

- name: Install Frontend Dependencies
run: npm install --legacy-peer-deps
working-directory: front

- name: Verify package.json
run: cat front/package.json

- name: Run SonarCloud Analysis
uses: sonarsource/sonarcloud-github-action@v2
with:
projectBaseDir: .
args: >
-Dsonar.organization=${{ secrets.SONAR_ORGANIZATION }}
-Dsonar.projectKey=${{ secrets.SONAR_PROJECT_KEY }}
-Dsonar.token=${{ secrets.SONAR_TOKEN }}
-Dsonar.sources=back/src,front/src
-Dsonar.tests=back/src/test,front/src
-Dsonar.inclusions=**/*.java,**/*.js,**/*.ts
-Dsonar.java.binaries=back/target/classes
env:
SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
JAVA_HOME: ${{ runner.tool_cache }}/jdk/11
